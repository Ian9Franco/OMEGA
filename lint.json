[{"filePath":"D:\\Dev\\CodeProjects\\i\\src\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":4,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":55,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowRight"},"fix":{"range":[100,112],"text":""},"desc":"Remove unused variable \"ArrowRight\"."}]},{"ruleId":"prefer-const","severity":2,"message":"'bankDebtBeforeInterest' is never reassigned. Use 'const' instead.","line":78,"column":13,"nodeType":"Identifier","messageId":"useConst","endLine":78,"endColumn":35,"fix":{"range":[2466,2511],"text":"const bankDebtBeforeInterest = currentBankDebt;"}},{"ruleId":"prefer-const","severity":2,"message":"'monthSalaryToDebtTarget' is never reassigned. Use 'const' instead.","line":83,"column":13,"nodeType":"Identifier","messageId":"useConst","endLine":83,"endColumn":36,"fix":{"range":[2637,2709],"text":"const monthSalaryToDebtTarget = i < 3 ? salaryToDebt[i] : salaryToDebt[2];"}}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":2,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useMemo } from 'react';\nimport { TrendingDown, AlertCircle, Wallet, ArrowRight, TrendingUp } from 'lucide-react';\n\nconst INITIAL_DATA = {\n  sueldo: 800000,\n  ahorro: 4909900,\n  deudaMaster: 1466525.12,\n  deudaVisa: 1243086.57,\n  deudaMP: 221400.00,\n  gastosFijos: 245000 // Expensas + Vida\n};\n\nconst CONSTANTS = {\n  TEM_DEBT: 0.0709, // 7.09% Tasa Efectiva Mensual Tarjetas\n  TNA_SAVINGS: 0.263, // 26.3% Tasa Nominal Anual Rendimiento (Ej: Mercadopago)\n  IVA: 0.21,\n  SELLOS: 0.012,\n  IIBB: 0.02\n};\n\nconst TEM_SAVINGS = CONSTANTS.TNA_SAVINGS / 12;\n\nconst formatCurrency = (val: number) => \n  new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS', maximumFractionDigits: 0 }).format(Math.round(val));\n\nexport default function Home() {\n  const initialTotalDebt = INITIAL_DATA.deudaMaster + INITIAL_DATA.deudaVisa + INITIAL_DATA.deudaMP;\n\n  // Month-by-month state arrays (Months 1, 2, 3)\n  const [savingsInjections, setSavingsInjections] = useState<number[]>([0, 0, 0]);\n  const [salaryToDebt, setSalaryToDebt] = useState<number[]>([300000, 300000, 300000]);\n\n  const updateArray = (idx: number, val: number, isSavings: boolean) => {\n    if (isSavings) {\n        const next = [...savingsInjections];\n        next[idx] = val;\n        setSavingsInjections(next);\n    } else {\n        const next = [...salaryToDebt];\n        next[idx] = val;\n        setSalaryToDebt(next);\n    }\n  };\n\n  // Projection Engine\n  const projection = useMemo(() => {\n    let currentBankDebt = initialTotalDebt;\n    let currentSavings = INITIAL_DATA.ahorro;\n    \n    // Self-debt tracking\n    let currentSelfDebt = 0;\n    \n    let totalInterestPaid = 0;\n    let totalYieldEarned = 0;\n    \n    const months = [];\n    \n    // Project for 6 months to see the long tail\n    for (let i = 0; i < 6; i++) {\n        // Yield from current savings balance BEFORE injection/payment\n        const monthYield = currentSavings * TEM_SAVINGS;\n        currentSavings += monthYield;\n        totalYieldEarned += monthYield;\n\n        // Apply Savings Injection (only allow if we have savings for it)\n        let injectionThisMonth = 0;\n        if (i < 3) {\n            injectionThisMonth = Math.min(savingsInjections[i], currentSavings);\n            currentSavings -= injectionThisMonth;\n            currentBankDebt -= injectionThisMonth;\n            currentSelfDebt += injectionThisMonth;\n        }\n\n        if (currentBankDebt < 0) currentBankDebt = 0;\n\n        let bankDebtBeforeInterest = currentBankDebt;\n        let pmtToBank = 0;\n        let pmtToSelf = 0;\n        let monthInterest = 0;\n        let bankMinPayment = 0;\n        let monthSalaryToDebtTarget = i < 3 ? salaryToDebt[i] : salaryToDebt[2]; // Carry forward M3 setting for future months\n\n        if (currentBankDebt > 0) {\n            // Apply compound interest and taxes\n            const baseInt = currentBankDebt * CONSTANTS.TEM_DEBT;\n            const iva = baseInt * CONSTANTS.IVA;\n            const iibb = currentBankDebt * CONSTANTS.IIBB; \n            monthInterest = baseInt + iva + iibb;\n            const sellos = (currentBankDebt + monthInterest) * CONSTANTS.SELLOS;\n            monthInterest += sellos;\n\n            // Minimum Payment Formula: Total Interest/Taxes + 5% of Capital\n            bankMinPayment = monthInterest + (currentBankDebt * 0.05);\n\n            totalInterestPaid += monthInterest;\n            currentBankDebt += monthInterest;\n\n            // Enforce minimum payment logically if user under-budgeted\n            // (In reality if they don't, they go into default. For sim, we cap at min payment or their target, whichever is HIGHEST)\n            const actualBankPayment = Math.max(monthSalaryToDebtTarget, bankMinPayment);\n            \n            // Cannot pay more than salary \n            pmtToBank = Math.min(actualBankPayment, INITIAL_DATA.sueldo);\n            \n            // Cannot pay more than debt\n            pmtToBank = Math.min(currentBankDebt, pmtToBank);\n\n            currentBankDebt -= pmtToBank;\n        }\n\n        // If we have salary left over after bank, pay off self-debt\n        const remainingSalaryPmt = monthSalaryToDebtTarget - pmtToBank;\n        if (remainingSalaryPmt > 0 && currentSelfDebt > 0) {\n            pmtToSelf = Math.min(currentSelfDebt, remainingSalaryPmt);\n            currentSelfDebt -= pmtToSelf;\n            currentSavings += pmtToSelf; // replenishing the stash\n        }\n\n        months.push({\n            monthId: i + 1,\n            monthStr: `Mes ${i + 1}`,\n            bankDebtStart: bankDebtBeforeInterest,\n            injection: injectionThisMonth,\n            interest: monthInterest,\n            minPayment: bankMinPayment,\n            bankPaid: pmtToBank,\n            savingsYield: monthYield,\n            bankDebtEnd: currentBankDebt,\n            selfDebt: currentSelfDebt,\n            savingsEnd: currentSavings,\n            livingCashFlow: INITIAL_DATA.sueldo - pmtToBank - pmtToSelf - INITIAL_DATA.gastosFijos\n        });\n    }\n\n    return { months, totalInterestPaid, totalYieldEarned, currentSelfDebt, finalBankDebt: currentBankDebt, finalSavings: currentSavings };\n  }, [initialTotalDebt, savingsInjections, salaryToDebt]);\n\n  const pureInterestStart = useMemo(() => {\n    const baseInt = initialTotalDebt * CONSTANTS.TEM_DEBT;\n    const iva = baseInt * CONSTANTS.IVA;\n    const iibb = initialTotalDebt * CONSTANTS.IIBB;\n    const subtotal = baseInt + iva + iibb;\n    const sellos = (initialTotalDebt + subtotal) * CONSTANTS.SELLOS;\n    return baseInt + iva + iibb + sellos;\n  }, [initialTotalDebt]);\n\n  return (\n    <main className=\"p-4 md:p-8 max-w-7xl mx-auto space-y-6\">\n      <header className=\"mb-4\">\n        <h1 className=\"text-3xl md:text-5xl font-bold text-gradient mb-2\">Planificador Din├ímico</h1>\n        <p className=\"text-slate-400 text-lg\">Simul├í tus pagos mes a mes y descubr├¡ tu flujo de caja real.</p>\n      </header>\n\n      {/* Snapshot Banners */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div className=\"glass rounded-2xl p-5 border-red-500/30\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <div className=\"p-2 bg-red-500/20 rounded-lg text-red-500\">\n                <AlertCircle size={24} />\n            </div>\n            <h3 className=\"text-red-400 font-medium\">P├®rdida Pura Mensual (Intereses + Impuestos)</h3>\n          </div>\n          <p className=\"text-2xl font-bold text-red-500\">{formatCurrency(pureInterestStart)}</p>\n          <p className=\"text-xs text-slate-400 mt-1\">El costo de mantener la deuda actua 30 d├¡as m├ís.</p>\n        </div>\n\n        <div className=\"glass rounded-2xl p-5 border-emerald-500/30\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <div className=\"p-2 bg-emerald-500/20 rounded-lg text-emerald-500\">\n                <TrendingUp size={24} />\n            </div>\n            <h3 className=\"text-emerald-400 font-medium\">Rendimiento Base Ahorros (Un Mes)</h3>\n          </div>\n          <p className=\"text-2xl font-bold text-emerald-500\">{formatCurrency(INITIAL_DATA.ahorro * TEM_SAVINGS)}</p>\n          <p className=\"text-xs text-slate-400 mt-1\">Generado autom├íticamente si no tocas tus ahorros ({CONSTANTS.TNA_SAVINGS * 100}% TNA).</p>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\n        \n        {/* Left Column: Input Scenarios per Month */}\n        <div className=\"xl:col-span-1 space-y-6\">\n            <div className=\"glass rounded-2xl p-5\">\n                <h2 className=\"text-xl font-semibold mb-4 border-b border-slate-700 pb-2\">Controles por Per├¡odo</h2>\n                \n                {[0, 1, 2].map((mIdx) => {\n                    const monthData = projection.months[mIdx];\n                    const minAllowedPmt = Math.round(monthData.minPayment);\n                    \n                    return (\n                        <div key={mIdx} className=\"mb-6 p-4 bg-slate-800/50 rounded-xl border border-slate-700/50\">\n                            <h3 className=\"font-bold text-slate-200 mb-4 border-b border-slate-700/50 pb-2\">Mes {mIdx + 1}</h3>\n                            \n                            {/* Savings Slider */}\n                            <div className=\"mb-5\">\n                                <div className=\"flex justify-between mb-1\">\n                                    <label className=\"text-sm text-slate-400 relative group cursor-help\">\n                                        Inyectar Ahorro \n                                        <div className=\"absolute top-0 opacity-0 group-hover:opacity-100 mt-6 bg-slate-900 text-xs p-2 rounded w-48 transition z-10 border border-slate-700 pointer-events-none\">\n                                            Dinero que sacas excepcionalmente este mes para matar capital adeudado r├ípidamente.\n                                        </div>\n                                    </label>\n                                    <span className=\"font-bold text-emerald-400\">{formatCurrency(savingsInjections[mIdx])}</span>\n                                </div>\n                                <input \n                                    type=\"range\" \n                                    min=\"0\" \n                                    max=\"5000000\" \n                                    step=\"10000\" \n                                    value={savingsInjections[mIdx]}\n                                    onChange={(e) => updateArray(mIdx, Number(e.target.value), true)}\n                                    className=\"w-full accent-emerald-500 h-2 bg-slate-900 rounded-lg appearance-none cursor-pointer\"\n                                />\n                            </div>\n\n                            {/* Salary Slider */}\n                            <div className=\"mb-2\">\n                                <div className=\"flex justify-between mb-1\">\n                                    <label className=\"text-sm text-slate-400\">Sueldo Asignado a Deuda</label>\n                                    <span className=\"font-bold text-blue-400\">{formatCurrency(salaryToDebt[mIdx])}</span>\n                                </div>\n                                <input \n                                    type=\"range\" \n                                    min={0} \n                                    max={INITIAL_DATA.sueldo} \n                                    step=\"10000\" \n                                    value={salaryToDebt[mIdx]}\n                                    onChange={(e) => updateArray(mIdx, Number(e.target.value), false)}\n                                    className=\"w-full accent-blue-500 h-2 bg-slate-900 rounded-lg appearance-none cursor-pointer\"\n                                />\n                                {salaryToDebt[mIdx] < minAllowedPmt && (\n                                    <p className=\"text-xs text-red-400 mt-2 font-medium\">\n                                        ÔÜá´©Å Advertencia: El pago m├¡nimo exige {formatCurrency(minAllowedPmt)}. El simulador forzar├í el m├¡nimo para evitar default.\n                                    </p>\n                                )}\n                            </div>\n\n                            {/* Net Cash Flow Warning Box */}\n                            <div className={`mt-4 p-3 rounded-lg flex items-center gap-2 ${monthData.livingCashFlow < 0 ? 'bg-red-500/10 border border-red-500/20' : 'bg-slate-900 border border-slate-700'}`}>\n                                <Wallet size={16} className={monthData.livingCashFlow < 0 ? 'text-red-400' : 'text-slate-400'} />\n                                <div>\n                                    <p className={`text-xs ${monthData.livingCashFlow < 0 ? 'text-red-400 font-medium' : 'text-slate-400'}`}>Flujo Neto Post-Gastos Fijos</p>\n                                    <p className={`text-sm font-bold ${monthData.livingCashFlow < 0 ? 'text-red-500' : 'text-slate-200'}`}>\n                                        {formatCurrency(monthData.livingCashFlow)}\n                                        {monthData.livingCashFlow < 0 && <span className=\"text-xs ml-1 font-normal block\">(Necesitar├ís quemar ahorro para vivir)</span>}\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n\n        {/* Right Column: Dashboards & Table */}\n        <div className=\"xl:col-span-2 flex flex-col gap-6\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                <div className=\"glass p-4 rounded-2xl flex flex-col justify-center\">\n                    <h3 className=\"text-slate-400 text-xs mb-1 uppercase tracking-wider font-semibold\">Tasa de Banco vs Ahorro</h3>\n                    <div className=\"text-lg font-bold\">\n                        <span className=\"text-red-400\">7.09%</span> vs <span className=\"text-emerald-400\">2.19%</span>\n                    </div>\n                    <span className=\"text-xs text-slate-500\">TEM</span>\n                </div>\n                <div className=\"glass p-4 rounded-2xl\">\n                    <h3 className=\"text-slate-400 text-xs mb-1 uppercase tracking-wider font-semibold\">Target Junio (M3): Deuda</h3>\n                    <div className={`text-2xl font-bold ${projection.months[2].bankDebtEnd <= 800000 ? 'text-emerald-400' : 'text-amber-500'}`}>\n                        {formatCurrency(projection.months[2].bankDebtEnd)}\n                    </div>\n                </div>\n                <div className=\"glass p-4 rounded-2xl\">\n                    <h3 className=\"text-slate-400 text-xs mb-1 uppercase tracking-wider font-semibold\">Target Junio (M3): Ahorros</h3>\n                    <div className={`text-2xl font-bold ${projection.months[2].savingsEnd >= 5000000 ? 'text-emerald-400' : 'text-amber-500'}`}>\n                        {formatCurrency(projection.months[2].savingsEnd)}\n                    </div>\n                </div>\n            </div>\n\n            {/* Timetable */}\n            <div className=\"glass rounded-2xl p-1 overflow-hidden flex-1\">\n                <div className=\"p-5 border-b border-slate-700/50 flex justify-between items-center bg-slate-800/30\">\n                     <h2 className=\"text-lg font-semibold flex items-center gap-2\">\n                        <TrendingDown className=\"text-blue-400\" /> Proyecci├│n Avanzada\n                    </h2>\n                </div>\n                \n                <div className=\"overflow-x-auto custom-scroll p-4\">\n                    <table className=\"w-full text-left border-collapse min-w-[800px] text-sm\">\n                        <thead>\n                            <tr className=\"text-slate-400 border-b border-slate-700 font-medium\">\n                                <th className=\"pb-3 px-2\">Per├¡odo</th>\n                                <th className=\"pb-3 px-2 text-right\">Inyecci├│n<br/>Rescate</th>\n                                <th className=\"pb-3 px-2 text-right text-red-500/80\">Int. Banco<br/>(Costo)</th>\n                                <th className=\"pb-3 px-2 text-right text-emerald-500/80\">Int. Ahorro<br/>(Yield)</th>\n                                <th className=\"pb-3 px-2 text-right font-bold text-red-400\">Pago<br/>M├¡nimo</th>\n                                <th className=\"pb-3 px-2 text-right text-blue-400\">Pago<br/>Sueldo</th>\n                                <th className=\"pb-3 px-2 text-right text-amber-400\">Flujo<br/>Neto</th>\n                                <th className=\"pb-3 px-2 text-right\">Saldo Deuda</th>\n                                <th className=\"pb-3 px-2 text-right\">Saldo Ahorro</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {projection.months.map((m) => (\n                                <tr key={m.monthId} className=\"border-b border-slate-800/50 hover:bg-slate-800/30 transition-colors\">\n                                    <td className=\"py-3 px-2 font-medium text-slate-300\">{m.monthStr}</td>\n                                    <td className=\"py-3 px-2 text-right text-emerald-400\">{formatCurrency(m.injection)}</td>\n                                    <td className=\"py-3 px-2 text-right text-red-400/80\">+{formatCurrency(m.interest)}</td>\n                                    <td className=\"py-3 px-2 text-right text-emerald-400/80\">+{formatCurrency(m.savingsYield)}</td>\n                                    <td className=\"py-3 px-2 text-right font-bold text-red-400 underline decoration-slate-600 underline-offset-2\">{formatCurrency(m.minPayment)}</td>\n                                    <td className=\"py-3 px-2 text-right font-medium text-blue-300\">-{formatCurrency(m.bankPaid)}</td>\n                                    <td className={`py-3 px-2 text-right font-semibold ${m.livingCashFlow < 0 ? 'text-red-500' : 'text-emerald-500'}`}>{formatCurrency(m.livingCashFlow)}</td>\n                                    <td className=\"py-3 px-2 text-right font-bold text-slate-200\">{formatCurrency(m.bankDebtEnd)}</td>\n                                    <td className=\"py-3 px-2 text-right font-bold text-slate-200\">{formatCurrency(m.savingsEnd)}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                        <tfoot className=\"bg-slate-900/50\">\n                            <tr>\n                                <th className=\"py-3 px-2 font-semibold\">Totales 6M</th>\n                                <th></th>\n                                <th className=\"py-3 px-2 text-right font-bold text-red-500\">P├®rdida:<br/>-{formatCurrency(projection.totalInterestPaid)}</th>\n                                <th className=\"py-3 px-2 text-right font-bold text-emerald-500\">Ganancia:<br/>+{formatCurrency(projection.totalYieldEarned)}</th>\n                                <th colSpan={5}></th>\n                            </tr>\n                        </tfoot>\n                    </table>\n                </div>\n            </div>\n            \n        </div>\n      </div>\n    </main>\n  );\n}\n","usedDeprecatedRules":[]}]
